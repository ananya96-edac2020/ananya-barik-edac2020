create database ass2;
use ass2;

create table PUBLISHERS(
PUBID      integer(6)   NOT NULL,
    PNAME      VARCHAR(30),
    EMAIL      VARCHAR(50)  UNIQUE,
    PHONE      VARCHAR(30),
    PRIMARY KEY(PUBID)
);
CREATE TABLE  SUBJECTS
(
    SUBID      VARCHAR(5) PRIMARY KEY,
    SNAME      VARCHAR(30)
);

CREATE TABLE  AUTHORS
(
    AUID     integer(5)  PRIMARY KEY,
    ANAME      VARCHAR(30),
    EMAIL      VARCHAR(50)  UNIQUE,
    PHONE      VARCHAR(30)
);
CREATE TABLE  TITLES
(
    TITLEID    integer(5) PRIMARY KEY,
    TITLE      VARCHAR(30),
    PUBID      integer(3),
    SUBID      VARCHAR(5),
    PUBDATE    DATE,
    COVER      CHAR(1)  CHECK ( COVER IN ('P','H','p','h')),
    PRICE      integer(4),
	CONSTRAINT TITLES_PUBID_FK FOREIGN KEY (PUBID) REFERENCES PUBLISHERS(PUBID),
	CONSTRAINT TITLES_SUBID_FK FOREIGN KEY (SUBID) REFERENCES SUBJECTS(SUBID)
);

CREATE TABLE  TITLEAUTHORS
(
    TITLEID    integer(5) ,
    AUID       integer(5) ,
    IMPORTANCE integer(2),
   PRIMARY KEY(TITLEID,AUID),
   CONSTRAINT  TITLESAUTHORS_TITLEID_FK FOREIGN KEY (TITLEID) REFERENCES TITLES(TITLEID),
   CONSTRAINT  TITLESAUTHORS_AUTHID_FK FOREIGN KEY (AUID) REFERENCES AUTHORS(AUID)
);


CREATE TABLE  SUBJECTS_BACKUP
(
    SUBID      VARCHAR(5) PRIMARY KEY,
    SNAME      VARCHAR(30)
);


INSERT INTO SUBJECTS VALUES ('ORA','ORACLE DATABASE 10g');
INSERT INTO SUBJECTS VALUES ('JAVA','JAVA LANGUAGE');
INSERT INTO SUBJECTS VALUES ('JEE','JAVA ENTEPRISE EDITION');
INSERT INTO SUBJECTS VALUES ('VB','VISUAL BASIC.NET');
INSERT INTO SUBJECTS VALUES ('ASP','ASP.NET');

INSERT INTO PUBLISHERS VALUES (1,'WILLEY','WDT@VSNL.NET','91-11-23260877');
INSERT INTO PUBLISHERS VALUES (2,'WROX','INFO@WROX.COM',NULL);
INSERT INTO PUBLISHERS VALUES (3,'TATA MCGRAW-HILL','FEEDBACK@TATAMCGRAWHILL.COM','91-11-33333322');
INSERT INTO PUBLISHERS VALUES (4,'TECHMEDIA','BOOKS@TECHMEDIA.COM','91-11-33257660');


INSERT INTO AUTHORS VALUES (101, 'HERBERT SCHILD','HERBERT@YAHOO.COM',NULL);
INSERT INTO AUTHORS VALUES (102, 'JAMES GOODWILL','GOODWILL@HOTMAIL.COM',NULL);
INSERT INTO AUTHORS VALUES (103, 'DAVAID HUNTER','HUNTER@HOTMAIL.COM',NULL);
INSERT INTO AUTHORS VALUES (104, 'STEPHEN WALTHER','WALTHER@GMAIL.COM',NULL);
INSERT INTO AUTHORS VALUES (105, 'KEVIN LONEY','LONEY@ORACLE.COM',NULL);
INSERT INTO AUTHORS VALUES (106, 'ED. ROMANS','ROMANS@THESERVERSIDE.COM',NULL);

INSERT INTO TITLES VALUES (1001,'ASP.NET UNLEASHED',4,'ASP','2012-04-02','P',540);
INSERT INTO TITLES VALUES (1002,'ORACLE10G COMP. REF.',3,'ORA','2001-05-05','P',575);
INSERT INTO TITLES VALUES (1003,'MASTERING EJB',1,'JEE','2003-02-05','P',475);
INSERT INTO TITLES VALUES (1004,'JAVA COMP. REF',3,'JAVA','2003-04-05','P',499);
INSERT INTO TITLES VALUES (1005,'PRO. VB.NET',2,'VB','2015-06-05','P',450);

INSERT INTO TITLEAUTHORS VALUES (1001,104,1);
INSERT INTO TITLEAUTHORS VALUES (1002,105,1);
INSERT INTO TITLEAUTHORS VALUES (1003,106,1);
INSERT INTO TITLEAUTHORS VALUES (1004,101,1);
INSERT INTO TITLEAUTHORS VALUES (1005,103,1);
INSERT INTO TITLEAUTHORS VALUES (1005,102,2);

SELECT  PNAME,PHONE,EMAIL FROM PUBLISHERS;
SELECT ANAME,PHONE FROM AUTHORS;
SELECT TITLEID, TITLE, PUBDATE FROM TITLES;
SELECT AUID,TITLEID,IMPORTANCE FROM TITLEAUTHORS;

SELECT * from SUBJECTS WHERE SNAME="ORACLE DATABASE 10g" ;
USE ass2;
SELECT * FROM SUBJECTS WHERE SNAME LIKE 'J%';
SELECT * FROM AUTHORS WHERE ANAME LIKE '%ER';
SELECT * FROM SUBJECTS WHERE SNAME IN ('ASP.NET');
SELECT * FROM SUBJECTS;
SELECT * FROM PUBLISHERS WHERE PNAME IN ('TATA MCGRAW-HILL');
SELECT * FROM TITLES;
SELECT TITLE , SUM(PRICE) FROM TITLES GROUP BY TITLE HAVING
SUM(PRICE) < 500; 
use ass2;
select * from titles;
select * from titles where titleid=101 or price<500;
SELECT * FROM SUBJECTS WHERE SUBID IN('JAVA','JEE');
SELECT * FROM AUTHORS WHERE AUID >103;
SELECT * FROM TITLES WHERE PUBDATE < '2012-04-03' ORDER BY PUBDATE DESC;

select * from publishers where pname in('TECHMEDIA','WROX');

select max(price) from titles; 
select avg(importance) from titleauthors;
select count(auid) from authors;
select sum(price) from titles;


CREATE TABLE Employee(
emp_id integer(6),
emp_name char(50));

insert into Employee values(101,'sayali');
insert into Employee values(102,'sohil');

alter table employee modify column emp_name varchar(50);
SET SQL_SAFE_UPDATES = 0;
update employee set emp_name="scott" where emp_id=101;
select * from employee;

SELECT CHAR_LENGTH("cdac juhu") AS LengthOfString;
select ascii("cdac juhu") AS NumCodeOfFirstChar;
select character_length("cdac juhu") as lengthofstring;
select concat("cdac","juhu") as concatenatedstring;
select instr("cadc juhu","h") as matchposition;
select lcase("CDAC JUHU");
SELECT LENGTH("CDAC JUHU") AS LENGTHOFSTRING;
SELECT REVERSE("CDAC JUHU");
SELECT SUBSTRING("CDAC JUHU",2,3) AS ExtractString;
SELECT SUBSTRING_INDEX("CDAC.JUHU",".",1);
SELECT UCASE("cdac juhu");
select trim('   cdac juhu  ') as trimmedstring;

select adddate("2017-02-03",interval 20 day);
select addtime("2017-02-03 09:34:25","2");
select current_date();
select current_time();
select current_timestamp();
select date("2018-02-08   08:25:41");
select date_format("2019-04-02", "%w %m %y");
select date_sub("2017-02-03",interval 10 day);
select day("2015-02-04");
select dayname("2015-02-04");
select dayofmonth("2015-02-04");
select dayofweek("2015-02-04");
select dayofyear("2015-02-04");
select extract(month from "2015-02-04");
select from_days(685467);
select hour(" 2017-06-20 09:34:00");
select last_day("2017-06-26");
select localtime();


select sysdate();
SELECT SYSDATE() + 1;
SELECT TIME("19:30:10");
select system_user();
select last_day("2003-04-05");



SELECT ROUND(30.5);
SELECT CEIL(32.1);
 SELECT FLOOR(32.1);
 SELECT SIGN(-15);
 SELECT MOD(23,2);
 SELECT SQRT(18);
  SELECT POWER(10,2);